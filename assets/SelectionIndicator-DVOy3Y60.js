import{R as Rt,S as G,d as z,T as ot,$ as pe,U as at,V as Ue,W as Mt,X as At,n as ut,j as B,Y as U,Z as Lt,_ as Bt,a0 as Ot,h as ce,i as Ut,a1 as Ne,q as Se,a2 as Ht,p as He,a3 as _,a4 as zt,a5 as Vt,a6 as ct,a7 as Wt,B as xe,C as Ie,a8 as qt,l as dt,c as Yt,s as ft,a9 as ze,aa as Xt,a as ht,H as Gt,e as jt,G as Jt,E as Zt}from"./compose-gULnUq8R.js";import{r as f,h as ye,$ as E,i as _t}from"./index-B9XmhcWF.js";class Qt{get currentNode(){return this._currentNode}set currentNode(e){if(!G(this.root,e))throw new Error("Cannot set currentNode to a node that is not contained by the root node.");const t=[];let i=e,l=e;for(this._currentNode=e;i&&i!==this.root;)if(i.nodeType===Node.DOCUMENT_FRAGMENT_NODE){const s=i,a=this._doc.createTreeWalker(s,this.whatToShow,{acceptNode:this._acceptNode});t.push(a),a.currentNode=l,this._currentSetFor.add(a),i=l=s.host}else i=i.parentNode;const r=this._doc.createTreeWalker(this.root,this.whatToShow,{acceptNode:this._acceptNode});t.push(r),r.currentNode=l,this._currentSetFor.add(r),this._walkerStack=t}get doc(){return this._doc}firstChild(){let e=this.currentNode,t=this.nextNode();return G(e,t)?(t&&(this.currentNode=t),t):(this.currentNode=e,null)}lastChild(){let t=this._walkerStack[0].lastChild();return t&&(this.currentNode=t),t}nextNode(){const e=this._walkerStack[0].nextNode();if(e){if(e.shadowRoot){var t;let l;if(typeof this.filter=="function"?l=this.filter(e):!((t=this.filter)===null||t===void 0)&&t.acceptNode&&(l=this.filter.acceptNode(e)),l===NodeFilter.FILTER_ACCEPT)return this.currentNode=e,e;let r=this.nextNode();return r&&(this.currentNode=r),r}return e&&(this.currentNode=e),e}else if(this._walkerStack.length>1){this._walkerStack.shift();let i=this.nextNode();return i&&(this.currentNode=i),i}else return null}previousNode(){const e=this._walkerStack[0];if(e.currentNode===e.root){if(this._currentSetFor.has(e))if(this._currentSetFor.delete(e),this._walkerStack.length>1){this._walkerStack.shift();let l=this.previousNode();return l&&(this.currentNode=l),l}else return null;return null}const t=e.previousNode();if(t){if(t.shadowRoot){var i;let r;if(typeof this.filter=="function"?r=this.filter(t):!((i=this.filter)===null||i===void 0)&&i.acceptNode&&(r=this.filter.acceptNode(t)),r===NodeFilter.FILTER_ACCEPT)return t&&(this.currentNode=t),t;let s=this.lastChild();return s&&(this.currentNode=s),s}return t&&(this.currentNode=t),t}else if(this._walkerStack.length>1){this._walkerStack.shift();let l=this.previousNode();return l&&(this.currentNode=l),l}else return null}nextSibling(){return null}previousSibling(){return null}parentNode(){return null}constructor(e,t,i,l){this._walkerStack=[],this._currentSetFor=new Set,this._acceptNode=s=>{if(s.nodeType===Node.ELEMENT_NODE){const c=s.shadowRoot;if(c){const u=this._doc.createTreeWalker(c,this.whatToShow,{acceptNode:this._acceptNode});return this._walkerStack.unshift(u),NodeFilter.FILTER_ACCEPT}else{var a;if(typeof this.filter=="function")return this.filter(s);if(!((a=this.filter)===null||a===void 0)&&a.acceptNode)return this.filter.acceptNode(s);if(this.filter===null)return NodeFilter.FILTER_ACCEPT}}return NodeFilter.FILTER_SKIP},this._doc=e,this.root=t,this.filter=l??null,this.whatToShow=i??NodeFilter.SHOW_ALL,this._currentNode=t,this._walkerStack.unshift(e.createTreeWalker(t,i,this._acceptNode));const r=t.shadowRoot;if(r){const s=this._doc.createTreeWalker(r,this.whatToShow,{acceptNode:this._acceptNode});this._walkerStack.unshift(s)}}}function en(n,e,t,i){return Rt()?new Qt(n,e,t,i):n.createTreeWalker(e,t,i)}function Ve(n,e){const t=f.useRef(!0),i=f.useRef(null);z(()=>(t.current=!0,()=>{t.current=!1}),[]),z(()=>{t.current?t.current=!1:(!i.current||e.some((l,r)=>!Object.is(l,i[r])))&&n(),i.current=e},e)}function tn(n,e){if(!n)return!1;let t=window.getComputedStyle(n),i=/(auto|scroll)/.test(t.overflow+t.overflowX+t.overflowY);return i&&e&&(i=n.scrollHeight!==n.clientHeight||n.scrollWidth!==n.clientWidth),i}function nn(n,e){const t=[];for(;n&&n!==document.documentElement;)tn(n,e)&&t.push(n),n=n.parentElement;return t}function de(n){return ot()?n.metaKey:n.ctrlKey}const ln=new Set(["checkbox","radio","range","color","file","image","button","submit","reset"]);function ii(n){return n instanceof HTMLInputElement&&!ln.has(n.type)||n instanceof HTMLTextAreaElement||n instanceof HTMLElement&&n.isContentEditable}let rn=0;const Ce=new Map;function sn(n){let[e,t]=f.useState();return z(()=>{if(!n)return;let i=Ce.get(n);if(i)t(i.element.id);else{let l=`react-aria-description-${rn++}`;t(l);let r=document.createElement("div");r.id=l,r.style.display="none",r.textContent=n,document.body.appendChild(r),i={refCount:0,element:r},Ce.set(n,i)}return i.refCount++,()=>{i&&--i.refCount===0&&(i.element.remove(),Ce.delete(n))}},[n]),{"aria-describedby":n?e:void 0}}function $e(n,e,t,i){let l=pe(t),r=t==null;f.useEffect(()=>{if(r||!n.current)return;let s=n.current;return s.addEventListener(e,l,i),()=>{s.removeEventListener(e,l,i)}},[n,e,i,r])}function pt(n,e){let t=We(n,e,"left"),i=We(n,e,"top"),l=e.offsetWidth,r=e.offsetHeight,s=n.scrollLeft,a=n.scrollTop,{borderTopWidth:c,borderLeftWidth:u,scrollPaddingTop:p,scrollPaddingRight:h,scrollPaddingBottom:v,scrollPaddingLeft:y}=getComputedStyle(n),g=s+parseInt(u,10),P=a+parseInt(c,10),m=g+n.clientWidth,w=P+n.clientHeight,K=parseInt(p,10)||0,x=parseInt(v,10)||0,N=parseInt(h,10)||0,M=parseInt(y,10)||0;t<=s+M?s=t-parseInt(u,10)-M:t+l>m-N&&(s+=t+l-m+N),i<=P+K?a=i-parseInt(c,10)-K:i+r>w-x&&(a+=i+r-w+x),n.scrollLeft=s,n.scrollTop=a}function We(n,e,t){const i=t==="left"?"offsetLeft":"offsetTop";let l=0;for(;e.offsetParent&&(l+=e[i],e.offsetParent!==n);){if(e.offsetParent.contains(n)){l-=n[i];break}e=e.offsetParent}return l}function qe(n,e){if(n&&document.contains(n)){let s=document.scrollingElement||document.documentElement,a=window.getComputedStyle(s).overflow==="hidden";if(a){let c=nn(n);a||c.push(s);for(let u of c)pt(u,n)}else{var t;let{left:c,top:u}=n.getBoundingClientRect();n==null||(t=n.scrollIntoView)===null||t===void 0||t.call(n,{block:"nearest"});let{left:p,top:h}=n.getBoundingClientRect();if(Math.abs(c-p)>1||Math.abs(u-h)>1){var i,l,r;e==null||(l=e.containingElement)===null||l===void 0||(i=l.scrollIntoView)===null||i===void 0||i.call(l,{block:"center",inline:"center"}),(r=n.scrollIntoView)===null||r===void 0||r.call(n,{block:"nearest"})}}}}const on="react-aria-clear-focus",an="react-aria-focus";function li(n,e=!0){let[t,i]=f.useState(!0),l=t&&e;return z(()=>{if(l&&n.current&&"getAnimations"in n.current)for(let r of n.current.getAnimations())r instanceof CSSTransition&&r.cancel()},[n,l]),vt(n,l,f.useCallback(()=>i(!1),[])),l}function ri(n,e){let[t,i]=f.useState(e?"open":"closed");switch(t){case"open":e||i("exiting");break;case"closed":case"exiting":e&&i("open");break}let l=t==="exiting";return vt(n,l,f.useCallback(()=>{i(r=>r==="exiting"?"closed":r)},[])),l}function vt(n,e,t){z(()=>{if(e&&n.current){if(!("getAnimations"in n.current)){t();return}let i=n.current.getAnimations();if(i.length===0){t();return}let l=!1;return Promise.all(i.map(r=>r.finished)).then(()=>{l||ye.flushSync(()=>{t()})}).catch(()=>{}),()=>{l=!0}}},[n,e,t])}function un(n,e){if(e.has(n))throw new TypeError("Cannot initialize the same private elements twice on an object")}function cn(n,e,t){un(n,e),e.set(n,t)}const yt=E.createContext({register:()=>{}});yt.displayName="PressResponderContext";function dn(n,e){return e.get?e.get.call(n):e.value}function bt(n,e,t){if(!e.has(n))throw new TypeError("attempted to "+t+" private field on non-instance");return e.get(n)}function fn(n,e){var t=bt(n,e,"get");return dn(n,t)}function hn(n,e,t){if(e.set)e.set.call(n,t);else{if(!e.writable)throw new TypeError("attempted to set read only private field");e.value=t}}function Ye(n,e,t){var i=bt(n,e,"set");return hn(n,i,t),t}function pn(n){let e=f.useContext(yt);if(e){let{register:t,...i}=e;n=ce(i,n),t()}return Ut(e,n.ref),n}var ge=new WeakMap;class me{continuePropagation(){Ye(this,ge,!1)}get shouldStopPropagation(){return fn(this,ge)}constructor(e,t,i,l){cn(this,ge,{writable:!0,value:void 0}),Ye(this,ge,!0);var r;let s=(r=l?.target)!==null&&r!==void 0?r:i.currentTarget;const a=s?.getBoundingClientRect();let c,u=0,p,h=null;i.clientX!=null&&i.clientY!=null&&(p=i.clientX,h=i.clientY),a&&(p!=null&&h!=null?(c=p-a.left,u=h-a.top):(c=a.width/2,u=a.height/2)),this.type=e,this.pointerType=t,this.target=i.currentTarget,this.shiftKey=i.shiftKey,this.metaKey=i.metaKey,this.ctrlKey=i.ctrlKey,this.altKey=i.altKey,this.x=c,this.y=u}}const Xe=Symbol("linkClicked"),Ge="react-aria-pressable-style",je="data-react-aria-pressable";function $t(n){let{onPress:e,onPressChange:t,onPressStart:i,onPressEnd:l,onPressUp:r,onClick:s,isDisabled:a,isPressed:c,preventFocusOnPress:u,shouldCancelOnPointerExit:p,allowTextSelectionOnPress:h,ref:v,...y}=pn(n),[g,P]=f.useState(!1),m=f.useRef({isPressed:!1,ignoreEmulatedMouseEvents:!1,didFirePressStart:!1,isTriggeringEvent:!1,activePointerId:null,target:null,isOverTarget:!1,pointerType:null,disposables:[]}),{addGlobalListener:w,removeAllGlobalListeners:K,removeGlobalListener:x}=at(),N=f.useCallback((o,$)=>{let d=m.current;if(a||d.didFirePressStart)return!1;let C=!0;if(d.isTriggeringEvent=!0,i){let I=new me("pressstart",$,o);i(I),C=I.shouldStopPropagation}return t&&t(!0),d.isTriggeringEvent=!1,d.didFirePressStart=!0,P(!0),C},[a,i,t]),M=f.useCallback((o,$,d=!0)=>{let C=m.current;if(!C.didFirePressStart)return!1;C.didFirePressStart=!1,C.isTriggeringEvent=!0;let I=!0;if(l){let T=new me("pressend",$,o);l(T),I=T.shouldStopPropagation}if(t&&t(!1),P(!1),e&&d&&!a){let T=new me("press",$,o);e(T),I&&(I=T.shouldStopPropagation)}return C.isTriggeringEvent=!1,I},[a,l,t,e]),V=pe(M),R=f.useCallback((o,$)=>{let d=m.current;if(a)return!1;if(r){d.isTriggeringEvent=!0;let C=new me("pressup",$,o);return r(C),d.isTriggeringEvent=!1,C.shouldStopPropagation}return!0},[a,r]),L=pe(R),q=f.useCallback(o=>{let $=m.current;if($.isPressed&&$.target){$.didFirePressStart&&$.pointerType!=null&&M(ae($.target,o),$.pointerType,!1),$.isPressed=!1,A(null),$.isOverTarget=!1,$.activePointerId=null,$.pointerType=null,K(),h||Ue($.target);for(let d of $.disposables)d();$.disposables=[]}},[h,K,M]),Y=pe(q),X=f.useCallback(o=>{p&&q(o)},[p,q]),Q=f.useCallback(o=>{a||s?.(o)},[a,s]),H=f.useCallback((o,$)=>{if(!a&&s){let d=new MouseEvent("click",o);Mt(d,$),s(At(d))}},[a,s]),he=pe(H),[b,k]=f.useState(!1);z(()=>{let o=m.current;if(b){let $=T=>{var J;if(o.isPressed&&o.target&&Ee(T,o.target)){var ie;Je(U(T),T.key)&&T.preventDefault();let re=U(T),S=G(o.target,U(T));V(ae(o.target,T),"keyboard",S),S&&he(T,o.target),K(),T.key!=="Enter"&&Le(o.target)&&G(o.target,re)&&!T[Xe]&&(T[Xe]=!0,Ne(o.target,T,!1)),o.isPressed=!1,k(!1),(ie=o.metaKeyEvents)===null||ie===void 0||ie.delete(T.key)}else if(T.key==="Meta"&&(!((J=o.metaKeyEvents)===null||J===void 0)&&J.size)){var le;let re=o.metaKeyEvents;o.metaKeyEvents=void 0;for(let S of re.values())(le=o.target)===null||le===void 0||le.dispatchEvent(new KeyboardEvent("keyup",S))}},d=o.target,I=ut(T=>{d&&Ee(T,d)&&!T.repeat&&G(d,U(T))&&o.target&&L(ae(o.target,T),"keyboard")},$);return w(B(o.target),"keyup",I,!0),()=>{x(B(o.target),"keyup",I,!0)}}},[b,w,K,x]);let[F,A]=f.useState(null);z(()=>{let o=m.current;if(F==="pointer"){let $=C=>{if(C.pointerId===o.activePointerId&&o.isPressed&&C.button===0&&o.target){if(G(o.target,U(C))&&o.pointerType!=null){let I=!1,T=setTimeout(()=>{o.isPressed&&o.target instanceof HTMLElement&&(I?Y(C):(Se(o.target),o.target.click()))},80);w(C.currentTarget,"click",()=>I=!0,!0),o.disposables.push(()=>clearTimeout(T))}else Y(C);o.isOverTarget=!1}},d=C=>{Y(C)};return w(B(o.target),"pointerup",$,!1),w(B(o.target),"pointercancel",d,!1),()=>{x(B(o.target),"pointerup",$,!1),x(B(o.target),"pointercancel",d,!1)}}},[F,w,x]);let W=f.useMemo(()=>{let o=m.current,$={onKeyDown(d){if(Ee(d.nativeEvent,d.currentTarget)&&G(d.currentTarget,U(d.nativeEvent))){var C;Je(U(d.nativeEvent),d.key)&&d.preventDefault();let I=!0;!o.isPressed&&!d.repeat&&(o.target=d.currentTarget,o.isPressed=!0,k(!0),o.pointerType="keyboard",I=N(d,"keyboard")),I&&d.stopPropagation(),d.metaKey&&ot()&&((C=o.metaKeyEvents)===null||C===void 0||C.set(d.key,d.nativeEvent))}else d.key==="Meta"&&(o.metaKeyEvents=new Map)},onClick(d){if(!(d&&!G(d.currentTarget,U(d.nativeEvent)))&&d&&d.button===0&&!o.isTriggeringEvent&&!Ne.isOpening){let C=!0;if(a&&d.preventDefault(),!o.ignoreEmulatedMouseEvents&&!o.isPressed&&(o.pointerType==="virtual"||Ht(d.nativeEvent))){let I=N(d,"virtual"),T=R(d,"virtual"),J=M(d,"virtual");Q(d),C=I&&T&&J}else if(o.isPressed&&o.pointerType!=="keyboard"){let I=o.pointerType||d.nativeEvent.pointerType||"virtual",T=R(ae(d.currentTarget,d),I),J=M(ae(d.currentTarget,d),I,!0);C=T&&J,o.isOverTarget=!1,Q(d),q(d)}o.ignoreEmulatedMouseEvents=!1,C&&d.stopPropagation()}}};return typeof PointerEvent<"u"&&($.onPointerDown=d=>{if(d.button!==0||!G(d.currentTarget,U(d.nativeEvent)))return;if(Lt(d.nativeEvent)){o.pointerType="virtual";return}o.pointerType=d.pointerType;let C=!0;if(!o.isPressed){o.isPressed=!0,A("pointer"),o.isOverTarget=!0,o.activePointerId=d.pointerId,o.target=d.currentTarget,h||Bt(o.target),C=N(d,o.pointerType);let I=U(d.nativeEvent);"releasePointerCapture"in I&&I.releasePointerCapture(d.pointerId)}C&&d.stopPropagation()},$.onMouseDown=d=>{if(G(d.currentTarget,U(d.nativeEvent))&&d.button===0){if(u){let C=Ot(d.target);C&&o.disposables.push(C)}d.stopPropagation()}},$.onPointerUp=d=>{!G(d.currentTarget,U(d.nativeEvent))||o.pointerType==="virtual"||d.button===0&&!o.isPressed&&R(d,o.pointerType||d.pointerType)},$.onPointerEnter=d=>{d.pointerId===o.activePointerId&&o.target&&!o.isOverTarget&&o.pointerType!=null&&(o.isOverTarget=!0,N(ae(o.target,d),o.pointerType))},$.onPointerLeave=d=>{d.pointerId===o.activePointerId&&o.target&&o.isOverTarget&&o.pointerType!=null&&(o.isOverTarget=!1,M(ae(o.target,d),o.pointerType,!1),X(d))},$.onDragStart=d=>{G(d.currentTarget,U(d.nativeEvent))&&q(d)}),$},[a,u,K,h,q,X,M,N,R,Q,H]);return f.useEffect(()=>{if(!v)return;const o=B(v.current);if(!o||!o.head||o.getElementById(Ge))return;const $=o.createElement("style");$.id=Ge,$.textContent=`
@layer {
  [${je}] {
    touch-action: pan-x pan-y pinch-zoom;
  }
}
    `.trim(),o.head.prepend($)},[v]),f.useEffect(()=>{let o=m.current;return()=>{var $;h||Ue(($=o.target)!==null&&$!==void 0?$:void 0);for(let d of o.disposables)d();o.disposables=[]}},[h]),{isPressed:c||g,pressProps:ce(y,W,{[je]:!0})}}function Le(n){return n.tagName==="A"&&n.hasAttribute("href")}function Ee(n,e){const{key:t,code:i}=n,l=e,r=l.getAttribute("role");return(t==="Enter"||t===" "||t==="Spacebar"||i==="Space")&&!(l instanceof He(l).HTMLInputElement&&!gt(l,t)||l instanceof He(l).HTMLTextAreaElement||l.isContentEditable)&&!((r==="link"||!r&&Le(l))&&t!=="Enter")}function ae(n,e){let t=e.clientX,i=e.clientY;return{currentTarget:n,shiftKey:e.shiftKey,ctrlKey:e.ctrlKey,metaKey:e.metaKey,altKey:e.altKey,clientX:t,clientY:i}}function vn(n){return n instanceof HTMLInputElement?!1:n instanceof HTMLButtonElement?n.type!=="submit"&&n.type!=="reset":!Le(n)}function Je(n,e){return n instanceof HTMLInputElement?!gt(n,e):vn(n)}const yn=new Set(["checkbox","radio","range","color","file","image","button","submit","reset"]);function gt(n,e){return n.type==="checkbox"||n.type==="radio"?e===" ":yn.has(n.type)}const bn=500;function $n(n){let{isDisabled:e,onLongPressStart:t,onLongPressEnd:i,onLongPress:l,threshold:r=bn,accessibilityDescription:s}=n;const a=f.useRef(void 0);let{addGlobalListener:c,removeGlobalListener:u}=at(),{pressProps:p}=$t({isDisabled:e,onPressStart(v){if(v.continuePropagation(),(v.pointerType==="mouse"||v.pointerType==="touch")&&(t&&t({...v,type:"longpressstart"}),a.current=setTimeout(()=>{v.target.dispatchEvent(new PointerEvent("pointercancel",{bubbles:!0})),B(v.target).activeElement!==v.target&&Se(v.target),l&&l({...v,type:"longpress"}),a.current=void 0},r),v.pointerType==="touch")){let y=g=>{g.preventDefault()};c(v.target,"contextmenu",y,{once:!0}),c(window,"pointerup",()=>{setTimeout(()=>{u(v.target,"contextmenu",y)},30)},{once:!0})}},onPressEnd(v){a.current&&clearTimeout(a.current),i&&(v.pointerType==="mouse"||v.pointerType==="touch")&&i({...v,type:"longpressend"})}}),h=sn(l&&!e?s:void 0);return{longPressProps:ce(p,h)}}const Ze=E.createContext(null),Fe="react-aria-focus-scope-restore";let D=null;function si(n){let{children:e,contain:t,restoreFocus:i,autoFocus:l}=n,r=f.useRef(null),s=f.useRef(null),a=f.useRef([]),{parentNode:c}=f.useContext(Ze)||{},u=f.useMemo(()=>new Re({scopeRef:a}),[a]);z(()=>{let v=c||O.root;if(O.getTreeNode(v.scopeRef)&&D&&!Ke(D,v.scopeRef)){let y=O.getTreeNode(D);y&&(v=y)}v.addChild(u),O.addNode(u)},[u,c]),z(()=>{let v=O.getTreeNode(a);v&&(v.contain=!!t)},[t]),z(()=>{var v;let y=(v=r.current)===null||v===void 0?void 0:v.nextSibling,g=[],P=m=>m.stopPropagation();for(;y&&y!==s.current;)g.push(y),y.addEventListener(Fe,P),y=y.nextSibling;return a.current=g,()=>{for(let m of g)m.removeEventListener(Fe,P)}},[e]),Kn(a,i,t),Sn(a,t),wn(a,i,t),xn(a,l),f.useEffect(()=>{const v=_(B(a.current?a.current[0]:void 0));let y=null;if(j(v,a.current)){for(let g of O.traverse())g.scopeRef&&j(v,g.scopeRef.current)&&(y=g);y===O.getTreeNode(a)&&(D=y.scopeRef)}},[a]),z(()=>()=>{var v,y,g;let P=(g=(y=O.getTreeNode(a))===null||y===void 0||(v=y.parent)===null||v===void 0?void 0:v.scopeRef)!==null&&g!==void 0?g:null;(a===D||Ke(a,D))&&(!P||O.getTreeNode(P))&&(D=P),O.removeTreeNode(a)},[a]);let p=f.useMemo(()=>gn(a),[]),h=f.useMemo(()=>({focusManager:p,parentNode:u}),[u,p]);return E.createElement(Ze.Provider,{value:h},E.createElement("span",{"data-focus-scope-start":!0,hidden:!0,ref:r}),e,E.createElement("span",{"data-focus-scope-end":!0,hidden:!0,ref:s}))}function gn(n){return{focusNext(e={}){let t=n.current,{from:i,tabbable:l,wrap:r,accept:s}=e;var a;let c=i||_(B((a=t[0])!==null&&a!==void 0?a:void 0)),u=t[0].previousElementSibling,p=ue(t),h=te(p,{tabbable:l,accept:s},t);h.currentNode=j(c,t)?c:u;let v=h.nextNode();return!v&&r&&(h.currentNode=u,v=h.nextNode()),v&&ee(v,!0),v},focusPrevious(e={}){let t=n.current,{from:i,tabbable:l,wrap:r,accept:s}=e;var a;let c=i||_(B((a=t[0])!==null&&a!==void 0?a:void 0)),u=t[t.length-1].nextElementSibling,p=ue(t),h=te(p,{tabbable:l,accept:s},t);h.currentNode=j(c,t)?c:u;let v=h.previousNode();return!v&&r&&(h.currentNode=u,v=h.previousNode()),v&&ee(v,!0),v},focusFirst(e={}){let t=n.current,{tabbable:i,accept:l}=e,r=ue(t),s=te(r,{tabbable:i,accept:l},t);s.currentNode=t[0].previousElementSibling;let a=s.nextNode();return a&&ee(a,!0),a},focusLast(e={}){let t=n.current,{tabbable:i,accept:l}=e,r=ue(t),s=te(r,{tabbable:i,accept:l},t);s.currentNode=t[t.length-1].nextElementSibling;let a=s.previousNode();return a&&ee(a,!0),a}}}function ue(n){return n[0].parentElement}function ve(n){let e=O.getTreeNode(D);for(;e&&e.scopeRef!==n;){if(e.contain)return!1;e=e.parent}return!0}function mn(n){if(n.checked)return!0;let e=[];if(!n.form)e=[...B(n).querySelectorAll(`input[type="radio"][name="${CSS.escape(n.name)}"]`)].filter(r=>!r.form);else{var t,i;let r=(i=n.form)===null||i===void 0||(t=i.elements)===null||t===void 0?void 0:t.namedItem(n.name);e=[...r??[]]}return e?!e.some(r=>r.checked):!1}function Sn(n,e){let t=f.useRef(void 0),i=f.useRef(void 0);z(()=>{let l=n.current;if(!e){i.current&&(cancelAnimationFrame(i.current),i.current=void 0);return}const r=B(l?l[0]:void 0);let s=u=>{if(u.key!=="Tab"||u.altKey||u.ctrlKey||u.metaKey||!ve(n)||u.isComposing)return;let p=_(r),h=n.current;if(!h||!j(p,h))return;let v=ue(h),y=te(v,{tabbable:!0},h);if(!p)return;y.currentNode=p;let g=u.shiftKey?y.previousNode():y.nextNode();g||(y.currentNode=u.shiftKey?h[h.length-1].nextElementSibling:h[0].previousElementSibling,g=u.shiftKey?y.previousNode():y.nextNode()),u.preventDefault(),g&&ee(g,!0)},a=u=>{(!D||Ke(D,n))&&j(U(u),n.current)?(D=n,t.current=U(u)):ve(n)&&!ne(U(u),n)?t.current?t.current.focus():D&&D.current&&De(D.current):ve(n)&&(t.current=U(u))},c=u=>{i.current&&cancelAnimationFrame(i.current),i.current=requestAnimationFrame(()=>{let p=Ie(),h=(p==="virtual"||p===null)&&zt()&&Vt(),v=_(r);if(!h&&v&&ve(n)&&!ne(v,n)){D=n;let g=U(u);if(g&&g.isConnected){var y;t.current=g,(y=t.current)===null||y===void 0||y.focus()}else D.current&&De(D.current)}})};return r.addEventListener("keydown",s,!1),r.addEventListener("focusin",a,!1),l?.forEach(u=>u.addEventListener("focusin",a,!1)),l?.forEach(u=>u.addEventListener("focusout",c,!1)),()=>{r.removeEventListener("keydown",s,!1),r.removeEventListener("focusin",a,!1),l?.forEach(u=>u.removeEventListener("focusin",a,!1)),l?.forEach(u=>u.removeEventListener("focusout",c,!1))}},[n,e]),z(()=>()=>{i.current&&cancelAnimationFrame(i.current)},[i])}function mt(n){return ne(n)}function j(n,e){return!n||!e?!1:e.some(t=>t.contains(n))}function ne(n,e=null){if(n instanceof Element&&n.closest("[data-react-aria-top-layer]"))return!0;for(let{scopeRef:t}of O.traverse(O.getTreeNode(e)))if(t&&j(n,t.current))return!0;return!1}function oi(n){return ne(n,D)}function Ke(n,e){var t;let i=(t=O.getTreeNode(e))===null||t===void 0?void 0:t.parent;for(;i;){if(i.scopeRef===n)return!0;i=i.parent}return!1}function ee(n,e=!1){if(n!=null&&!e)try{xe(n)}catch{}else if(n!=null)try{n.focus()}catch{}}function St(n,e=!0){let t=n[0].previousElementSibling,i=ue(n),l=te(i,{tabbable:e},n);l.currentNode=t;let r=l.nextNode();return e&&!r&&(i=ue(n),l=te(i,{tabbable:!1},n),l.currentNode=t,r=l.nextNode()),r}function De(n,e=!0){ee(St(n,e))}function xn(n,e){const t=E.useRef(e);f.useEffect(()=>{if(t.current){D=n;const i=B(n.current?n.current[0]:void 0);!j(_(i),D.current)&&n.current&&De(n.current)}t.current=!1},[n])}function Kn(n,e,t){z(()=>{if(e||t)return;let i=n.current;const l=B(i?i[0]:void 0);let r=s=>{let a=U(s);j(a,n.current)?D=n:mt(a)||(D=null)};return l.addEventListener("focusin",r,!1),i?.forEach(s=>s.addEventListener("focusin",r,!1)),()=>{l.removeEventListener("focusin",r,!1),i?.forEach(s=>s.removeEventListener("focusin",r,!1))}},[n,e,t])}function _e(n){let e=O.getTreeNode(D);for(;e&&e.scopeRef!==n;){if(e.nodeToRestore)return!1;e=e.parent}return e?.scopeRef===n}function wn(n,e,t){const i=f.useRef(typeof document<"u"?_(B(n.current?n.current[0]:void 0)):null);z(()=>{let l=n.current;const r=B(l?l[0]:void 0);if(!e||t)return;let s=()=>{(!D||Ke(D,n))&&j(_(r),n.current)&&(D=n)};return r.addEventListener("focusin",s,!1),l?.forEach(a=>a.addEventListener("focusin",s,!1)),()=>{r.removeEventListener("focusin",s,!1),l?.forEach(a=>a.removeEventListener("focusin",s,!1))}},[n,t]),z(()=>{const l=B(n.current?n.current[0]:void 0);if(!e)return;let r=s=>{if(s.key!=="Tab"||s.altKey||s.ctrlKey||s.metaKey||!ve(n)||s.isComposing)return;let a=l.activeElement;if(!ne(a,n)||!_e(n))return;let c=O.getTreeNode(n);if(!c)return;let u=c.nodeToRestore,p=te(l.body,{tabbable:!0});p.currentNode=a;let h=s.shiftKey?p.previousNode():p.nextNode();if((!u||!u.isConnected||u===l.body)&&(u=void 0,c.nodeToRestore=void 0),(!h||!ne(h,n))&&u){p.currentNode=u;do h=s.shiftKey?p.previousNode():p.nextNode();while(ne(h,n));s.preventDefault(),s.stopPropagation(),h?ee(h,!0):mt(u)?ee(u,!0):a.blur()}};return t||l.addEventListener("keydown",r,!0),()=>{t||l.removeEventListener("keydown",r,!0)}},[n,e,t]),z(()=>{const l=B(n.current?n.current[0]:void 0);if(!e)return;let r=O.getTreeNode(n);if(r){var s;return r.nodeToRestore=(s=i.current)!==null&&s!==void 0?s:void 0,()=>{let a=O.getTreeNode(n);if(!a)return;let c=a.nodeToRestore,u=_(l);if(e&&c&&(u&&ne(u,n)||u===l.body&&_e(n))){let p=O.clone();requestAnimationFrame(()=>{if(l.activeElement===l.body){let h=p.getTreeNode(n);for(;h;){if(h.nodeToRestore&&h.nodeToRestore.isConnected){Qe(h.nodeToRestore);return}h=h.parent}for(h=p.getTreeNode(n);h;){if(h.scopeRef&&h.scopeRef.current&&O.getTreeNode(h.scopeRef)){let v=St(h.scopeRef.current,!0);Qe(v);return}h=h.parent}}})}}}},[n,e])}function Qe(n){n.dispatchEvent(new CustomEvent(Fe,{bubbles:!0,cancelable:!0}))&&ee(n)}function te(n,e,t){let i=e?.tabbable?ct:Wt,l=n?.nodeType===Node.ELEMENT_NODE?n:null,r=B(l),s=en(r,n||r,NodeFilter.SHOW_ELEMENT,{acceptNode(a){var c;return!(e==null||(c=e.from)===null||c===void 0)&&c.contains(a)||e?.tabbable&&a.tagName==="INPUT"&&a.getAttribute("type")==="radio"&&(!mn(a)||s.currentNode.tagName==="INPUT"&&s.currentNode.type==="radio"&&s.currentNode.name===a.name)?NodeFilter.FILTER_REJECT:i(a)&&(!t||j(a,t))&&(!e?.accept||e.accept(a))?NodeFilter.FILTER_ACCEPT:NodeFilter.FILTER_SKIP}});return e?.from&&(s.currentNode=e.from),s}class Be{get size(){return this.fastMap.size}getTreeNode(e){return this.fastMap.get(e)}addTreeNode(e,t,i){let l=this.fastMap.get(t??null);if(!l)return;let r=new Re({scopeRef:e});l.addChild(r),r.parent=l,this.fastMap.set(e,r),i&&(r.nodeToRestore=i)}addNode(e){this.fastMap.set(e.scopeRef,e)}removeTreeNode(e){if(e===null)return;let t=this.fastMap.get(e);if(!t)return;let i=t.parent;for(let r of this.traverse())r!==t&&t.nodeToRestore&&r.nodeToRestore&&t.scopeRef&&t.scopeRef.current&&j(r.nodeToRestore,t.scopeRef.current)&&(r.nodeToRestore=t.nodeToRestore);let l=t.children;i&&(i.removeChild(t),l.size>0&&l.forEach(r=>i&&i.addChild(r))),this.fastMap.delete(t.scopeRef)}*traverse(e=this.root){if(e.scopeRef!=null&&(yield e),e.children.size>0)for(let t of e.children)yield*this.traverse(t)}clone(){var e;let t=new Be;var i;for(let l of this.traverse())t.addTreeNode(l.scopeRef,(i=(e=l.parent)===null||e===void 0?void 0:e.scopeRef)!==null&&i!==void 0?i:null,l.nodeToRestore);return t}constructor(){this.fastMap=new Map,this.root=new Re({scopeRef:null}),this.fastMap.set(null,this.root)}}class Re{addChild(e){this.children.add(e),e.parent=this}removeChild(e){this.children.delete(e),e.parent=void 0}constructor(e){this.children=new Set,this.contain=!1,this.scopeRef=e.scopeRef}}let O=new Be;function xt(n){let e=En(B(n));e!==n&&(e&&Cn(e,n),n&&Kt(n,e))}function Cn(n,e){n.dispatchEvent(new FocusEvent("blur",{relatedTarget:e})),n.dispatchEvent(new FocusEvent("focusout",{bubbles:!0,relatedTarget:e}))}function Kt(n,e){n.dispatchEvent(new FocusEvent("focus",{relatedTarget:e})),n.dispatchEvent(new FocusEvent("focusin",{bubbles:!0,relatedTarget:e}))}function En(n){let e=_(n),t=e?.getAttribute("aria-activedescendant");return t&&n.getElementById(t)||e}function Me(n){return qt()?n.altKey:n.ctrlKey}function ke(n,e){var t,i;let l=`[data-key="${CSS.escape(String(e))}"]`,r=(t=n.current)===null||t===void 0?void 0:t.dataset.collection;return r&&(l=`[data-collection="${CSS.escape(r)}"]${l}`),(i=n.current)===null||i===void 0?void 0:i.querySelector(l)}const wt=new WeakMap;function kn(n){let e=dt();return wt.set(n,e),e}function Tn(n){return wt.get(n)}const Pn=1e3;function Nn(n){let{keyboardDelegate:e,selectionManager:t,onTypeSelect:i}=n,l=f.useRef({search:"",timeout:void 0}).current,r=s=>{let a=In(s.key);if(!(!a||s.ctrlKey||s.metaKey||!s.currentTarget.contains(s.target)||l.search.length===0&&a===" ")){if(a===" "&&l.search.trim().length>0&&(s.preventDefault(),"continuePropagation"in s||s.stopPropagation()),l.search+=a,e.getKeyForSearch!=null){let c=e.getKeyForSearch(l.search,t.focusedKey);c==null&&(c=e.getKeyForSearch(l.search)),c!=null&&(t.setFocusedKey(c),i&&i(c))}clearTimeout(l.timeout),l.timeout=setTimeout(()=>{l.search=""},Pn)}};return{typeSelectProps:{onKeyDownCapture:e.getKeyForSearch?r:void 0}}}function In(n){return n.length===1||!/^[A-Z]/i.test(n)?n:""}function ai(n){let{selectionManager:e,keyboardDelegate:t,ref:i,autoFocus:l=!1,shouldFocusWrap:r=!1,disallowEmptySelection:s=!1,disallowSelectAll:a=!1,escapeKeyBehavior:c="clearSelection",selectOnFocus:u=e.selectionBehavior==="replace",disallowTypeAhead:p=!1,shouldUseVirtualFocus:h,allowsTabNavigation:v=!1,isVirtualized:y,scrollRef:g=i,linkBehavior:P="action"}=n,{direction:m}=Yt(),w=ft(),K=b=>{var k;if(b.altKey&&b.key==="Tab"&&b.preventDefault(),!(!((k=i.current)===null||k===void 0)&&k.contains(b.target)))return;const F=(S,se)=>{if(S!=null){if(e.isLink(S)&&P==="selection"&&u&&!Me(b)){ye.flushSync(()=>{e.setFocusedKey(S,se)});let oe=ke(i,S),Oe=e.getItemProps(S);oe&&w.open(oe,b,Oe.href,Oe.routerOptions);return}if(e.setFocusedKey(S,se),e.isLink(S)&&P==="override")return;b.shiftKey&&e.selectionMode==="multiple"?e.extendSelection(S):u&&!Me(b)&&e.replaceSelection(S)}};switch(b.key){case"ArrowDown":if(t.getKeyBelow){var A,W,o;let S=e.focusedKey!=null?(A=t.getKeyBelow)===null||A===void 0?void 0:A.call(t,e.focusedKey):(W=t.getFirstKey)===null||W===void 0?void 0:W.call(t);S==null&&r&&(S=(o=t.getFirstKey)===null||o===void 0?void 0:o.call(t,e.focusedKey)),S!=null&&(b.preventDefault(),F(S))}break;case"ArrowUp":if(t.getKeyAbove){var $,d,C;let S=e.focusedKey!=null?($=t.getKeyAbove)===null||$===void 0?void 0:$.call(t,e.focusedKey):(d=t.getLastKey)===null||d===void 0?void 0:d.call(t);S==null&&r&&(S=(C=t.getLastKey)===null||C===void 0?void 0:C.call(t,e.focusedKey)),S!=null&&(b.preventDefault(),F(S))}break;case"ArrowLeft":if(t.getKeyLeftOf){var I,T,J;let S=e.focusedKey!=null?(I=t.getKeyLeftOf)===null||I===void 0?void 0:I.call(t,e.focusedKey):null;S==null&&r&&(S=m==="rtl"?(T=t.getFirstKey)===null||T===void 0?void 0:T.call(t,e.focusedKey):(J=t.getLastKey)===null||J===void 0?void 0:J.call(t,e.focusedKey)),S!=null&&(b.preventDefault(),F(S,m==="rtl"?"first":"last"))}break;case"ArrowRight":if(t.getKeyRightOf){var ie,le,re;let S=e.focusedKey!=null?(ie=t.getKeyRightOf)===null||ie===void 0?void 0:ie.call(t,e.focusedKey):null;S==null&&r&&(S=m==="rtl"?(le=t.getLastKey)===null||le===void 0?void 0:le.call(t,e.focusedKey):(re=t.getFirstKey)===null||re===void 0?void 0:re.call(t,e.focusedKey)),S!=null&&(b.preventDefault(),F(S,m==="rtl"?"last":"first"))}break;case"Home":if(t.getFirstKey){if(e.focusedKey===null&&b.shiftKey)return;b.preventDefault();let S=t.getFirstKey(e.focusedKey,de(b));e.setFocusedKey(S),S!=null&&(de(b)&&b.shiftKey&&e.selectionMode==="multiple"?e.extendSelection(S):u&&e.replaceSelection(S))}break;case"End":if(t.getLastKey){if(e.focusedKey===null&&b.shiftKey)return;b.preventDefault();let S=t.getLastKey(e.focusedKey,de(b));e.setFocusedKey(S),S!=null&&(de(b)&&b.shiftKey&&e.selectionMode==="multiple"?e.extendSelection(S):u&&e.replaceSelection(S))}break;case"PageDown":if(t.getKeyPageBelow&&e.focusedKey!=null){let S=t.getKeyPageBelow(e.focusedKey);S!=null&&(b.preventDefault(),F(S))}break;case"PageUp":if(t.getKeyPageAbove&&e.focusedKey!=null){let S=t.getKeyPageAbove(e.focusedKey);S!=null&&(b.preventDefault(),F(S))}break;case"a":de(b)&&e.selectionMode==="multiple"&&a!==!0&&(b.preventDefault(),e.selectAll());break;case"Escape":c==="clearSelection"&&!s&&e.selectedKeys.size!==0&&(b.stopPropagation(),b.preventDefault(),e.clearSelection());break;case"Tab":if(!v){if(b.shiftKey)i.current.focus();else{let S=te(i.current,{tabbable:!0}),se,oe;do oe=S.lastChild(),oe&&(se=oe);while(oe);se&&(!se.contains(document.activeElement)||document.activeElement&&!ct(document.activeElement))&&Se(se)}break}}},x=f.useRef({top:0,left:0});$e(g,"scroll",y?void 0:()=>{var b,k,F,A;x.current={top:(F=(b=g.current)===null||b===void 0?void 0:b.scrollTop)!==null&&F!==void 0?F:0,left:(A=(k=g.current)===null||k===void 0?void 0:k.scrollLeft)!==null&&A!==void 0?A:0}});let N=b=>{if(e.isFocused){b.currentTarget.contains(b.target)||e.setFocused(!1);return}if(b.currentTarget.contains(b.target)){if(e.setFocused(!0),e.focusedKey==null){var k,F;let o=d=>{d!=null&&(e.setFocusedKey(d),u&&!e.isSelected(d)&&e.replaceSelection(d))},$=b.relatedTarget;var A,W;$&&b.currentTarget.compareDocumentPosition($)&Node.DOCUMENT_POSITION_FOLLOWING?o((A=e.lastSelectedKey)!==null&&A!==void 0?A:(k=t.getLastKey)===null||k===void 0?void 0:k.call(t)):o((W=e.firstSelectedKey)!==null&&W!==void 0?W:(F=t.getFirstKey)===null||F===void 0?void 0:F.call(t))}else!y&&g.current&&(g.current.scrollTop=x.current.top,g.current.scrollLeft=x.current.left);if(e.focusedKey!=null&&g.current){let o=ke(i,e.focusedKey);o instanceof HTMLElement&&(!o.contains(document.activeElement)&&!h&&Se(o),Ie()==="keyboard"&&qe(o,{containingElement:i.current}))}}},M=b=>{b.currentTarget.contains(b.relatedTarget)||e.setFocused(!1)},V=f.useRef(!1);$e(i,an,h?b=>{let{detail:k}=b;b.stopPropagation(),e.setFocused(!0),k?.focusStrategy==="first"&&(V.current=!0)}:void 0),Ve(()=>{if(V.current){var b,k;let F=(k=(b=t.getFirstKey)===null||b===void 0?void 0:b.call(t))!==null&&k!==void 0?k:null;if(F==null){let A=_();xt(i.current),Kt(A,null),e.collection.size>0&&(V.current=!1)}else e.setFocusedKey(F),V.current=!1}},[e.collection]),Ve(()=>{e.collection.size>0&&(V.current=!1)},[e.focusedKey]),$e(i,on,h?b=>{var k;b.stopPropagation(),e.setFocused(!1),!((k=b.detail)===null||k===void 0)&&k.clearFocusKey&&e.setFocusedKey(null)}:void 0);const R=f.useRef(l),L=f.useRef(!1);f.useEffect(()=>{if(R.current){var b,k;let W=null;var F;l==="first"&&(W=(F=(b=t.getFirstKey)===null||b===void 0?void 0:b.call(t))!==null&&F!==void 0?F:null);var A;l==="last"&&(W=(A=(k=t.getLastKey)===null||k===void 0?void 0:k.call(t))!==null&&A!==void 0?A:null);let o=e.selectedKeys;if(o.size){for(let $ of o)if(e.canSelectItem($)){W=$;break}}e.setFocused(!0),e.setFocusedKey(W),W==null&&!h&&i.current&&xe(i.current),e.collection.size>0&&(R.current=!1,L.current=!0)}});let q=f.useRef(e.focusedKey),Y=f.useRef(null);f.useEffect(()=>{if(e.isFocused&&e.focusedKey!=null&&(e.focusedKey!==q.current||L.current)&&g.current&&i.current){let b=Ie(),k=ke(i,e.focusedKey);if(!(k instanceof HTMLElement))return;(b==="keyboard"||L.current)&&(Y.current&&cancelAnimationFrame(Y.current),Y.current=requestAnimationFrame(()=>{g.current&&(pt(g.current,k),b!=="virtual"&&qe(k,{containingElement:i.current}))}))}!h&&e.isFocused&&e.focusedKey==null&&q.current!=null&&i.current&&xe(i.current),q.current=e.focusedKey,L.current=!1}),f.useEffect(()=>()=>{Y.current&&cancelAnimationFrame(Y.current)},[]),$e(i,"react-aria-focus-scope-restore",b=>{b.preventDefault(),e.setFocused(!0)});let X={onKeyDown:K,onFocus:N,onBlur:M,onMouseDown(b){g.current===b.target&&b.preventDefault()}},{typeSelectProps:Q}=Nn({keyboardDelegate:t,selectionManager:e});p||(X=ce(Q,X));let H;h||(H=e.focusedKey==null?0:-1);let he=kn(e.collection);return{collectionProps:ce(X,{tabIndex:H,"data-collection":he})}}function ui(n){let{id:e,selectionManager:t,key:i,ref:l,shouldSelectOnPressUp:r,shouldUseVirtualFocus:s,focus:a,isDisabled:c,onAction:u,allowsDifferentPressOrigin:p,linkBehavior:h="action"}=n,v=ft();e=dt(e);let y=o=>{if(o.pointerType==="keyboard"&&Me(o))t.toggleSelection(i);else{if(t.selectionMode==="none")return;if(t.isLink(i)){if(h==="selection"&&l.current){let $=t.getItemProps(i);v.open(l.current,o,$.href,$.routerOptions),t.setSelectedKeys(t.selectedKeys);return}else if(h==="override"||h==="none")return}t.selectionMode==="single"?t.isSelected(i)&&!t.disallowEmptySelection?t.toggleSelection(i):t.replaceSelection(i):o&&o.shiftKey?t.extendSelection(i):t.selectionBehavior==="toggle"||o&&(de(o)||o.pointerType==="touch"||o.pointerType==="virtual")?t.toggleSelection(i):t.replaceSelection(i)}};f.useEffect(()=>{i===t.focusedKey&&t.isFocused&&(s?xt(l.current):a?a():document.activeElement!==l.current&&l.current&&xe(l.current))},[l,i,t.focusedKey,t.childFocusStrategy,t.isFocused,s]),c=c||t.isDisabled(i);let g={};!s&&!c?g={tabIndex:i===t.focusedKey?0:-1,onFocus(o){o.target===l.current&&t.setFocusedKey(i)}}:c&&(g.onMouseDown=o=>{o.preventDefault()});let P=t.isLink(i)&&h==="override",m=u&&n.UNSTABLE_itemBehavior==="action",w=t.isLink(i)&&h!=="selection"&&h!=="none",K=!c&&t.canSelectItem(i)&&!P&&!m,x=(u||w)&&!c,N=x&&(t.selectionBehavior==="replace"?!K:!K||t.isEmpty),M=x&&K&&t.selectionBehavior==="replace",V=N||M,R=f.useRef(null),L=V&&K,q=f.useRef(!1),Y=f.useRef(!1),X=t.getItemProps(i),Q=o=>{if(u){var $;u(),($=l.current)===null||$===void 0||$.dispatchEvent(new CustomEvent("react-aria-item-action",{bubbles:!0}))}w&&l.current&&v.open(l.current,o,X.href,X.routerOptions)},H={ref:l};if(r?(H.onPressStart=o=>{R.current=o.pointerType,q.current=L,o.pointerType==="keyboard"&&(!V||tt())&&y(o)},p?(H.onPressUp=N?void 0:o=>{o.pointerType==="mouse"&&K&&y(o)},H.onPress=N?Q:o=>{o.pointerType!=="keyboard"&&o.pointerType!=="mouse"&&K&&y(o)}):H.onPress=o=>{if(N||M&&o.pointerType!=="mouse"){if(o.pointerType==="keyboard"&&!et())return;Q(o)}else o.pointerType!=="keyboard"&&K&&y(o)}):(H.onPressStart=o=>{R.current=o.pointerType,q.current=L,Y.current=N,K&&(o.pointerType==="mouse"&&!N||o.pointerType==="keyboard"&&(!x||tt()))&&y(o)},H.onPress=o=>{(o.pointerType==="touch"||o.pointerType==="pen"||o.pointerType==="virtual"||o.pointerType==="keyboard"&&V&&et()||o.pointerType==="mouse"&&Y.current)&&(V?Q(o):K&&y(o))}),g["data-collection"]=Tn(t.collection),g["data-key"]=i,H.preventFocusOnPress=s,s&&(H=ce(H,{onPressStart(o){o.pointerType!=="touch"&&(t.setFocused(!0),t.setFocusedKey(i))},onPress(o){o.pointerType==="touch"&&(t.setFocused(!0),t.setFocusedKey(i))}})),X)for(let o of["onPressStart","onPressEnd","onPressChange","onPress","onPressUp","onClick"])X[o]&&(H[o]=ut(H[o],X[o]));let{pressProps:he,isPressed:b}=$t(H),k=M?o=>{R.current==="mouse"&&(o.stopPropagation(),o.preventDefault(),Q(o))}:void 0,{longPressProps:F}=$n({isDisabled:!L,onLongPress(o){o.pointerType==="touch"&&(y(o),t.setSelectionBehavior("toggle"))}}),A=o=>{R.current==="touch"&&q.current&&o.preventDefault()},W=h!=="none"&&t.isLink(i)?o=>{Ne.isOpening||o.preventDefault()}:void 0;return{itemProps:ce(g,K||N||s&&!c?he:{},L?F:{},{onDoubleClick:k,onDragStartCapture:A,onClick:W,id:e},s?{onMouseDown:o=>o.preventDefault()}:void 0),isPressed:b,isSelected:t.isSelected(i),isFocused:t.isFocused&&t.focusedKey===i,isDisabled:c,allowsSelection:K,hasAction:V}}function et(){let n=window.event;return n?.key==="Enter"}function tt(){let n=window.event;return n?.key===" "||n?.code==="Space"}class Fn{build(e,t){return this.context=t,nt(()=>this.iterateCollection(e))}*iterateCollection(e){let{children:t,items:i}=e;if(E.isValidElement(t)&&t.type===E.Fragment)yield*this.iterateCollection({children:t.props.children,items:i});else if(typeof t=="function"){if(!i)throw new Error("props.children was a function but props.items is missing");let l=0;for(let r of i)yield*this.getFullNode({value:r,index:l},{renderer:t}),l++}else{let l=[];E.Children.forEach(t,s=>{s&&l.push(s)});let r=0;for(let s of l){let a=this.getFullNode({element:s,index:r},{});for(let c of a)r++,yield c}}}getKey(e,t,i,l){if(e.key!=null)return e.key;if(t.type==="cell"&&t.key!=null)return`${l}${t.key}`;let r=t.value;if(r!=null){var s;let a=(s=r.key)!==null&&s!==void 0?s:r.id;if(a==null)throw new Error("No key found for item");return a}return l?`${l}.${t.index}`:`$.${t.index}`}getChildState(e,t){return{renderer:t.renderer||e.renderer}}*getFullNode(e,t,i,l){if(E.isValidElement(e.element)&&e.element.type===E.Fragment){let m=[];E.Children.forEach(e.element.props.children,K=>{m.push(K)});var r;let w=(r=e.index)!==null&&r!==void 0?r:0;for(const K of m)yield*this.getFullNode({element:K,index:w++},t,i,l);return}let s=e.element;if(!s&&e.value&&t&&t.renderer){let m=this.cache.get(e.value);if(m&&(!m.shouldInvalidate||!m.shouldInvalidate(this.context))){m.index=e.index,m.parentKey=l?l.key:null,yield m;return}s=t.renderer(e.value)}if(E.isValidElement(s)){let m=s.type;if(typeof m!="function"&&typeof m.getCollectionNode!="function"){let N=s.type;throw new Error(`Unknown element <${N}> in collection.`)}let w=m.getCollectionNode(s.props,this.context);var a;let K=(a=e.index)!==null&&a!==void 0?a:0,x=w.next();for(;!x.done&&x.value;){let N=x.value;e.index=K;var c;let M=(c=N.key)!==null&&c!==void 0?c:null;M==null&&(M=N.element?null:this.getKey(s,e,t,i));let R=[...this.getFullNode({...N,key:M,index:K,wrapper:Dn(e.wrapper,N.wrapper)},this.getChildState(t,N),i?`${i}${s.key}`:s.key,l)];for(let L of R){var u,p;L.value=(p=(u=N.value)!==null&&u!==void 0?u:e.value)!==null&&p!==void 0?p:null,L.value&&this.cache.set(L.value,L);var h;if(e.type&&L.type!==e.type)throw new Error(`Unsupported type <${Te(L.type)}> in <${Te((h=l?.type)!==null&&h!==void 0?h:"unknown parent type")}>. Only <${Te(e.type)}> is supported.`);K++,yield L}x=w.next(R)}return}if(e.key==null||e.type==null)return;let v=this;var y,g;let P={type:e.type,props:e.props,key:e.key,parentKey:l?l.key:null,value:(y=e.value)!==null&&y!==void 0?y:null,level:l?l.level+1:0,index:e.index,rendered:e.rendered,textValue:(g=e.textValue)!==null&&g!==void 0?g:"","aria-label":e["aria-label"],wrapper:e.wrapper,shouldInvalidate:e.shouldInvalidate,hasChildNodes:e.hasChildNodes||!1,childNodes:nt(function*(){if(!e.hasChildNodes||!e.childNodes)return;let m=0;for(let w of e.childNodes()){w.key!=null&&(w.key=`${P.key}${w.key}`);let K=v.getFullNode({...w,index:m},v.getChildState(t,w),P.key,P);for(let x of K)m++,yield x}})};yield P}constructor(){this.cache=new WeakMap}}function nt(n){let e=[],t=null;return{*[Symbol.iterator](){for(let i of e)yield i;t||(t=n());for(let i of t)e.push(i),yield i}}}function Dn(n,e){if(n&&e)return t=>n(e(t));if(n)return n;if(e)return e}function Te(n){return n[0].toUpperCase()+n.slice(1)}function ci(n,e,t){let i=f.useMemo(()=>new Fn,[]),{children:l,items:r,collection:s}=n;return f.useMemo(()=>{if(s)return s;let c=i.build({children:l,items:r},t);return e(c)},[i,l,r,s,t,e])}function Rn(n,e){return typeof e.getChildren=="function"?e.getChildren(n.key):n.childNodes}function Mn(n){return An(n)}function An(n,e){for(let t of n)return t}function Pe(n,e,t){if(e.parentKey===t.parentKey)return e.index-t.index;let i=[...it(n,e),e],l=[...it(n,t),t],r=i.slice(0,l.length).findIndex((s,a)=>s!==l[a]);return r!==-1?(e=i[r],t=l[r],e.index-t.index):i.findIndex(s=>s===t)>=0?1:(l.findIndex(s=>s===e)>=0,-1)}function it(n,e){let t=[],i=e;for(;i?.parentKey!=null;)i=n.getItem(i.parentKey),i&&t.unshift(i);return t}class we{get childNodes(){throw new Error("childNodes is not supported")}clone(){let e=new this.constructor(this.key);return e.value=this.value,e.level=this.level,e.hasChildNodes=this.hasChildNodes,e.rendered=this.rendered,e.textValue=this.textValue,e["aria-label"]=this["aria-label"],e.index=this.index,e.parentKey=this.parentKey,e.prevKey=this.prevKey,e.nextKey=this.nextKey,e.firstChildKey=this.firstChildKey,e.lastChildKey=this.lastChildKey,e.props=this.props,e.render=this.render,e.colSpan=this.colSpan,e.colIndex=this.colIndex,e}filter(e,t,i){let l=this.clone();return t.addDescendants(l,e),l}constructor(e){this.value=null,this.level=0,this.hasChildNodes=!1,this.rendered=null,this.textValue="",this["aria-label"]=void 0,this.index=0,this.parentKey=null,this.prevKey=null,this.nextKey=null,this.firstChildKey=null,this.lastChildKey=null,this.props={},this.colSpan=null,this.colIndex=null,this.type=this.constructor.type,this.key=e}}class Ct extends we{filter(e,t,i){let[l,r]=Et(e,t,this.firstChildKey,i),s=this.clone();return s.firstChildKey=l,s.lastChildKey=r,s}}class Ln extends we{}Ln.type="header";class Bn extends we{}Bn.type="loader";class On extends Ct{filter(e,t,i){if(i(this.textValue,this)){let l=this.clone();return t.addDescendants(l,e),l}return null}}On.type="item";class Un extends Ct{filter(e,t,i){let l=super.filter(e,t,i);if(l&&l.lastChildKey!==null){let r=e.getItem(l.lastChildKey);if(r&&r.type!=="header")return l}return null}}Un.type="section";class Hn{get size(){return this.itemCount}getKeys(){return this.keyMap.keys()}*[Symbol.iterator](){let e=this.firstKey!=null?this.keyMap.get(this.firstKey):void 0;for(;e;)yield e,e=e.nextKey!=null?this.keyMap.get(e.nextKey):void 0}getChildren(e){let t=this.keyMap;return{*[Symbol.iterator](){let i=t.get(e),l=i?.firstChildKey!=null?t.get(i.firstChildKey):null;for(;l;)yield l,l=l.nextKey!=null?t.get(l.nextKey):void 0}}}getKeyBefore(e){let t=this.keyMap.get(e);if(!t)return null;if(t.prevKey!=null){for(t=this.keyMap.get(t.prevKey);t&&t.type!=="item"&&t.lastChildKey!=null;)t=this.keyMap.get(t.lastChildKey);var i;return(i=t?.key)!==null&&i!==void 0?i:null}return t.parentKey}getKeyAfter(e){let t=this.keyMap.get(e);if(!t)return null;if(t.type!=="item"&&t.firstChildKey!=null)return t.firstChildKey;for(;t;){if(t.nextKey!=null)return t.nextKey;if(t.parentKey!=null)t=this.keyMap.get(t.parentKey);else return null}return null}getFirstKey(){return this.firstKey}getLastKey(){let e=this.lastKey!=null?this.keyMap.get(this.lastKey):null;for(;e?.lastChildKey!=null;)e=this.keyMap.get(e.lastChildKey);var t;return(t=e?.key)!==null&&t!==void 0?t:null}getItem(e){var t;return(t=this.keyMap.get(e))!==null&&t!==void 0?t:null}at(){throw new Error("Not implemented")}clone(){let e=this.constructor,t=new e;return t.keyMap=new Map(this.keyMap),t.firstKey=this.firstKey,t.lastKey=this.lastKey,t.itemCount=this.itemCount,t}addNode(e){if(this.frozen)throw new Error("Cannot add a node to a frozen collection");e.type==="item"&&this.keyMap.get(e.key)==null&&this.itemCount++,this.keyMap.set(e.key,e)}addDescendants(e,t){this.addNode(e);let i=t.getChildren(e.key);for(let l of i)this.addDescendants(l,t)}removeNode(e){if(this.frozen)throw new Error("Cannot remove a node to a frozen collection");let t=this.keyMap.get(e);t!=null&&t.type==="item"&&this.itemCount--,this.keyMap.delete(e)}commit(e,t,i=!1){if(this.frozen)throw new Error("Cannot commit a frozen collection");this.firstKey=e,this.lastKey=t,this.frozen=!i}filter(e){let t=new this.constructor,[i,l]=Et(this,t,this.firstKey,e);return t?.commit(i,l),t}constructor(){this.keyMap=new Map,this.firstKey=null,this.lastKey=null,this.frozen=!1,this.itemCount=0}}function Et(n,e,t,i){if(t==null)return[null,null];let l=null,r=null,s=n.getItem(t);for(;s!=null;){let u=s.filter(n,e,i);u!=null&&(u.nextKey=null,r&&(u.prevKey=r.key,r.nextKey=u.key),l==null&&(l=u),e.addNode(u),r=u),s=s.nextKey?n.getItem(s.nextKey):null}if(r&&r.type==="separator"){let u=r.prevKey;e.removeNode(r.key),u?(r=e.getItem(u),r.nextKey=null):r=null}var a,c;return[(a=l?.key)!==null&&a!==void 0?a:null,(c=r?.key)!==null&&c!==void 0?c:null]}class kt{*[Symbol.iterator](){let e=this.firstChild;for(;e;)yield e,e=e.nextSibling}get firstChild(){return this._firstChild}set firstChild(e){this._firstChild=e,this.ownerDocument.markDirty(this)}get lastChild(){return this._lastChild}set lastChild(e){this._lastChild=e,this.ownerDocument.markDirty(this)}get previousSibling(){return this._previousSibling}set previousSibling(e){this._previousSibling=e,this.ownerDocument.markDirty(this)}get nextSibling(){return this._nextSibling}set nextSibling(e){this._nextSibling=e,this.ownerDocument.markDirty(this)}get parentNode(){return this._parentNode}set parentNode(e){this._parentNode=e,this.ownerDocument.markDirty(this)}get isConnected(){var e;return((e=this.parentNode)===null||e===void 0?void 0:e.isConnected)||!1}invalidateChildIndices(e){(this._minInvalidChildIndex==null||!this._minInvalidChildIndex.isConnected||e.index<this._minInvalidChildIndex.index)&&(this._minInvalidChildIndex=e,this.ownerDocument.markDirty(this))}updateChildIndices(){let e=this._minInvalidChildIndex;for(;e;)e.index=e.previousSibling?e.previousSibling.index+1:0,e=e.nextSibling;this._minInvalidChildIndex=null}appendChild(e){e.parentNode&&e.parentNode.removeChild(e),this.firstChild==null&&(this.firstChild=e),this.lastChild?(this.lastChild.nextSibling=e,e.index=this.lastChild.index+1,e.previousSibling=this.lastChild):(e.previousSibling=null,e.index=0),e.parentNode=this,e.nextSibling=null,this.lastChild=e,this.ownerDocument.markDirty(this),this.isConnected&&this.ownerDocument.queueUpdate()}insertBefore(e,t){if(t==null)return this.appendChild(e);e.parentNode&&e.parentNode.removeChild(e),e.nextSibling=t,e.previousSibling=t.previousSibling,e.index=t.index-1,this.firstChild===t?this.firstChild=e:t.previousSibling&&(t.previousSibling.nextSibling=e),t.previousSibling=e,e.parentNode=t.parentNode,this.invalidateChildIndices(e),this.isConnected&&this.ownerDocument.queueUpdate()}removeChild(e){e.parentNode===this&&(this._minInvalidChildIndex===e&&(this._minInvalidChildIndex=null),e.nextSibling&&(this.invalidateChildIndices(e.nextSibling),e.nextSibling.previousSibling=e.previousSibling),e.previousSibling&&(e.previousSibling.nextSibling=e.nextSibling),this.firstChild===e&&(this.firstChild=e.nextSibling),this.lastChild===e&&(this.lastChild=e.previousSibling),e.parentNode=null,e.nextSibling=null,e.previousSibling=null,e.index=0,this.ownerDocument.markDirty(e),this.isConnected&&this.ownerDocument.queueUpdate())}addEventListener(){}removeEventListener(){}get previousVisibleSibling(){let e=this.previousSibling;for(;e&&e.isHidden;)e=e.previousSibling;return e}get nextVisibleSibling(){let e=this.nextSibling;for(;e&&e.isHidden;)e=e.nextSibling;return e}get firstVisibleChild(){let e=this.firstChild;for(;e&&e.isHidden;)e=e.nextSibling;return e}get lastVisibleChild(){let e=this.lastChild;for(;e&&e.isHidden;)e=e.previousSibling;return e}constructor(e){this._firstChild=null,this._lastChild=null,this._previousSibling=null,this._nextSibling=null,this._parentNode=null,this._minInvalidChildIndex=null,this.ownerDocument=e}}class fe extends kt{get index(){return this._index}set index(e){this._index=e,this.ownerDocument.markDirty(this)}get level(){var e;return this.parentNode instanceof fe?this.parentNode.level+(((e=this.node)===null||e===void 0?void 0:e.type)==="item"?1:0):0}getMutableNode(){return this.node==null?null:(this.isMutated||(this.node=this.node.clone(),this.isMutated=!0),this.ownerDocument.markDirty(this),this.node)}updateNode(){var e,t,i,l,r,s,a,c;let u=this.nextVisibleSibling,p=this.getMutableNode();if(p!=null){p.index=this.index,p.level=this.level;var h;p.parentKey=this.parentNode instanceof fe&&(h=(e=this.parentNode.node)===null||e===void 0?void 0:e.key)!==null&&h!==void 0?h:null;var v;p.prevKey=(v=(i=this.previousVisibleSibling)===null||i===void 0||(t=i.node)===null||t===void 0?void 0:t.key)!==null&&v!==void 0?v:null;var y;p.nextKey=(y=u==null||(l=u.node)===null||l===void 0?void 0:l.key)!==null&&y!==void 0?y:null,p.hasChildNodes=!!this.firstChild;var g;p.firstChildKey=(g=(s=this.firstVisibleChild)===null||s===void 0||(r=s.node)===null||r===void 0?void 0:r.key)!==null&&g!==void 0?g:null;var P;if(p.lastChildKey=(P=(c=this.lastVisibleChild)===null||c===void 0||(a=c.node)===null||a===void 0?void 0:a.key)!==null&&P!==void 0?P:null,(p.colSpan!=null||p.colIndex!=null)&&u){var m,w;let K=((m=p.colIndex)!==null&&m!==void 0?m:p.index)+((w=p.colSpan)!==null&&w!==void 0?w:1);if(u.node!=null&&K!==u.node.colIndex){let x=u.getMutableNode();x.colIndex=K}}}}setProps(e,t,i,l,r){let s,{value:a,textValue:c,id:u,...p}=e;if(this.node==null?(s=new i(u??`react-aria-${++this.ownerDocument.nodeId}`),this.node=s):s=this.getMutableNode(),p.ref=t,s.props=p,s.rendered=l,s.render=r,s.value=a,e["aria-label"]&&(s["aria-label"]=e["aria-label"]),s.textValue=c||(typeof p.children=="string"?p.children:"")||e["aria-label"]||"",u!=null&&u!==s.key)throw new Error("Cannot change the id of an item");p.colSpan!=null&&(s.colSpan=p.colSpan),this.isConnected&&this.ownerDocument.queueUpdate()}get style(){let e=this;return{get display(){return e.isHidden?"none":""},set display(t){let i=t==="none";if(e.isHidden!==i){var l,r;(((l=e.parentNode)===null||l===void 0?void 0:l.firstVisibleChild)===e||((r=e.parentNode)===null||r===void 0?void 0:r.lastVisibleChild)===e)&&e.ownerDocument.markDirty(e.parentNode);let s=e.previousVisibleSibling,a=e.nextVisibleSibling;s&&e.ownerDocument.markDirty(s),a&&e.ownerDocument.markDirty(a),e.isHidden=i,e.ownerDocument.markDirty(e)}}}}hasAttribute(){}setAttribute(){}setAttributeNS(){}removeAttribute(){}constructor(e,t){super(t),this.nodeType=8,this.isMutated=!0,this._index=0,this.isHidden=!1,this.node=null}}class zn extends kt{get isConnected(){return!0}createElement(e){return new fe(e,this)}getMutableCollection(){return this.nextCollection||(this.nextCollection=this.collection.clone()),this.nextCollection}markDirty(e){this.dirtyNodes.add(e)}addNode(e){if(e.isHidden||e.node==null)return;let t=this.getMutableCollection();if(!t.getItem(e.node.key))for(let i of e)this.addNode(i);t.addNode(e.node)}removeNode(e){for(let t of e)this.removeNode(t);e.node&&this.getMutableCollection().removeNode(e.node.key)}getCollection(){return this.inSubscription?this.collection.clone():(this.queuedRender=!1,this.updateCollection(),this.collection)}updateCollection(){for(let a of this.dirtyNodes)a instanceof fe&&(!a.isConnected||a.isHidden)?this.removeNode(a):a.updateChildIndices();for(let a of this.dirtyNodes)a instanceof fe?(a.isConnected&&!a.isHidden&&(a.updateNode(),this.addNode(a)),a.node&&this.dirtyNodes.delete(a),a.isMutated=!1):this.dirtyNodes.delete(a);if(this.nextCollection){var e,t,i,l,r,s;this.nextCollection.commit((r=(t=this.firstVisibleChild)===null||t===void 0||(e=t.node)===null||e===void 0?void 0:e.key)!==null&&r!==void 0?r:null,(s=(l=this.lastVisibleChild)===null||l===void 0||(i=l.node)===null||i===void 0?void 0:i.key)!==null&&s!==void 0?s:null,this.isSSR),this.isSSR||(this.collection=this.nextCollection,this.nextCollection=null)}}queueUpdate(){if(!(this.dirtyNodes.size===0||this.queuedRender)){this.queuedRender=!0,this.inSubscription=!0;for(let e of this.subscriptions)e();this.inSubscription=!1}}subscribe(e){return this.subscriptions.add(e),()=>this.subscriptions.delete(e)}resetAfterSSR(){this.isSSR&&(this.isSSR=!1,this.firstChild=null,this.lastChild=null,this.nodeId=0)}constructor(e){super(null),this.nodeType=11,this.ownerDocument=this,this.dirtyNodes=new Set,this.isSSR=!1,this.nodeId=0,this.nodesByProps=new WeakMap,this.nextCollection=null,this.subscriptions=new Set,this.queuedRender=!1,this.inSubscription=!1,this.collection=e,this.nextCollection=e}}function Tt(n){let{children:e,items:t,idScope:i,addIdAndValue:l,dependencies:r=[]}=n,s=f.useMemo(()=>new WeakMap,r);return f.useMemo(()=>{if(t&&typeof e=="function"){let u=[];for(let p of t){let h=s.get(p);if(!h){h=e(p);var a,c;let v=(c=(a=h.props.id)!==null&&a!==void 0?a:p.key)!==null&&c!==void 0?c:p.id;if(v==null)throw new Error("Could not determine key for item");i!=null&&(v=i+":"+v),h=f.cloneElement(h,l?{key:v,id:v,value:p}:{key:v}),s.set(p,h)}u.push(h)}return u}else if(typeof e!="function")return e},[e,t,s,i,l])}var Vn=_t();const Pt=f.createContext(!1),be=f.createContext(null);function di(n){if(f.useContext(be))return n.content;let{collection:t,document:i}=Xn(n.createCollection);return E.createElement(E.Fragment,null,E.createElement(Xt,null,E.createElement(be.Provider,{value:i},n.content)),E.createElement(Wn,{render:n.children,collection:t}))}function Wn({collection:n,render:e}){return e(n)}function qn(n,e,t){let i=ht(),l=f.useRef(i);l.current=i;let r=f.useCallback(()=>l.current?t():e(),[e,t]);return Vn.useSyncExternalStore(n,r)}const Yn=typeof E.useSyncExternalStore=="function"?E.useSyncExternalStore:qn;function Xn(n){let[e]=f.useState(()=>new zn(n?.()||new Hn)),t=f.useCallback(s=>e.subscribe(s),[e]),i=f.useCallback(()=>{let s=e.getCollection();return e.isSSR&&e.resetAfterSSR(),s},[e]),l=f.useCallback(()=>(e.isSSR=!0,e.getCollection()),[e]);return{collection:Yn(t,i,l),document:e}}const Ae=f.createContext(null);function Gn(n){var e;return e=class extends we{},e.type=n,e}function Nt(n,e,t,i,l,r){typeof n=="string"&&(n=Gn(n));let s=f.useCallback(c=>{c?.setProps(e,t,n,i,r)},[e,t,i,r,n]),a=f.useContext(Ae);if(a){let c=a.ownerDocument.nodesByProps.get(e);return c||(c=a.ownerDocument.createElement(n.type),c.setProps(e,t,n,i,r),a.appendChild(c),a.ownerDocument.updateCollection(),a.ownerDocument.nodesByProps.set(e,c)),l?E.createElement(Ae.Provider,{value:c},l):null}return E.createElement(n.type,{ref:s},l)}function fi(n,e){let t=({node:l})=>e(l.props,l.props.ref,l),i=f.forwardRef((l,r)=>{let s=f.useContext(ze);if(!f.useContext(Pt)){if(e.length>=3)throw new Error(e.name+" cannot be rendered outside a collection.");return e(l,r)}return Nt(n,l,r,"children"in l?l.children:null,null,c=>E.createElement(ze.Provider,{value:s},E.createElement(t,{node:c})))});return i.displayName=e.name,i}function hi(n,e,t=It){let i=({node:r})=>e(r.props,r.props.ref,r),l=f.forwardRef((r,s)=>{let a=t(r);var c;return(c=Nt(n,r,s,null,a,u=>E.createElement(i,{node:u})))!==null&&c!==void 0?c:E.createElement(E.Fragment,null)});return l.displayName=e.name,l}function It(n){return Tt({...n,addIdAndValue:!0})}const lt=f.createContext(null);function pi(n){let e=f.useContext(lt),t=(e?.dependencies||[]).concat(n.dependencies);var i;let l=(i=n.idScope)!==null&&i!==void 0?i:e?.idScope,r=It({...n,idScope:l,dependencies:t});return f.useContext(be)&&(r=E.createElement(jn,null,r)),e=f.useMemo(()=>({dependencies:t,idScope:l}),[l,...t]),E.createElement(lt.Provider,{value:e},r)}function jn({children:n}){let e=f.useContext(be),t=f.useMemo(()=>E.createElement(be.Provider,{value:null},E.createElement(Pt.Provider,{value:!0},n)),[n]);return ht()?E.createElement(Ae.Provider,{value:e},t):ye.createPortal(t,e)}const vi=f.createContext(null),Jn={CollectionRoot({collection:n,renderDropIndicator:e}){return rt(n,null,e)},CollectionBranch({collection:n,parent:e,renderDropIndicator:t}){return rt(n,e,t)}};function rt(n,e,t){return Tt({items:e?n.getChildren(e.key):n,dependencies:[t],children(i){let l=i.render(i);return!t||i.type!=="item"?l:E.createElement(E.Fragment,null,t({type:"item",key:i.key,dropPosition:"before"}),l,Zn(n,i,t))}})}function Zn(n,e,t){let i=e.key,l=n.getKeyAfter(i),r=l!=null?n.getItem(l):null;for(;r!=null&&r.type!=="item";)l=n.getKeyAfter(r.key),r=l!=null?n.getItem(l):null;let s=e.nextKey!=null?n.getItem(e.nextKey):null;for(;s!=null&&s.type!=="item";)s=s.nextKey!=null?n.getItem(s.nextKey):null;let a=[];if(s==null){let c=e;for(;c?.type==="item"&&(!r||c.parentKey!==r.parentKey&&r.level<c.level);){let u=t({type:"item",key:c.key,dropPosition:"after"});f.isValidElement(u)&&a.push(f.cloneElement(u,{key:`${c.key}-after`})),c=c.parentKey!=null?n.getItem(c.parentKey):null}}return a}const yi=f.createContext(Jn);function bi(n){return f.useMemo(()=>n!=null?new Set([n]):null,[n])}class Z extends Set{constructor(e,t,i){super(e),e instanceof Z?(this.anchorKey=t??e.anchorKey,this.currentKey=i??e.currentKey):(this.anchorKey=t??null,this.currentKey=i??null)}}function _n(n,e){if(n.size!==e.size)return!1;for(let t of n)if(!e.has(t))return!1;return!0}function $i(n){let{selectionMode:e="none",disallowEmptySelection:t=!1,allowDuplicateSelectionEvents:i,selectionBehavior:l="toggle",disabledBehavior:r="all"}=n,s=f.useRef(!1),[,a]=f.useState(!1),c=f.useRef(null),u=f.useRef(null),[,p]=f.useState(null),h=f.useMemo(()=>st(n.selectedKeys),[n.selectedKeys]),v=f.useMemo(()=>st(n.defaultSelectedKeys,new Z),[n.defaultSelectedKeys]),[y,g]=Gt(h,v,n.onSelectionChange),P=f.useMemo(()=>n.disabledKeys?new Set(n.disabledKeys):new Set,[n.disabledKeys]),[m,w]=f.useState(l);l==="replace"&&m==="toggle"&&typeof y=="object"&&y.size===0&&w("replace");let K=f.useRef(l);return f.useEffect(()=>{l!==K.current&&(w(l),K.current=l)},[l]),{selectionMode:e,disallowEmptySelection:t,selectionBehavior:m,setSelectionBehavior:w,get isFocused(){return s.current},setFocused(x){s.current=x,a(x)},get focusedKey(){return c.current},get childFocusStrategy(){return u.current},setFocusedKey(x,N="first"){c.current=x,u.current=N,p(x)},selectedKeys:y,setSelectedKeys(x){(i||!_n(x,y))&&g(x)},disabledKeys:P,disabledBehavior:r}}function st(n,e){return n?n==="all"?"all":new Z(n):e}class Ft{get selectionMode(){return this.state.selectionMode}get disallowEmptySelection(){return this.state.disallowEmptySelection}get selectionBehavior(){return this.state.selectionBehavior}setSelectionBehavior(e){this.state.setSelectionBehavior(e)}get isFocused(){return this.state.isFocused}setFocused(e){this.state.setFocused(e)}get focusedKey(){return this.state.focusedKey}get childFocusStrategy(){return this.state.childFocusStrategy}setFocusedKey(e,t){(e==null||this.collection.getItem(e))&&this.state.setFocusedKey(e,t)}get selectedKeys(){return this.state.selectedKeys==="all"?new Set(this.getSelectAllKeys()):this.state.selectedKeys}get rawSelection(){return this.state.selectedKeys}isSelected(e){if(this.state.selectionMode==="none")return!1;let t=this.getKey(e);return t==null?!1:this.state.selectedKeys==="all"?this.canSelectItem(t):this.state.selectedKeys.has(t)}get isEmpty(){return this.state.selectedKeys!=="all"&&this.state.selectedKeys.size===0}get isSelectAll(){if(this.isEmpty)return!1;if(this.state.selectedKeys==="all")return!0;if(this._isSelectAll!=null)return this._isSelectAll;let e=this.getSelectAllKeys(),t=this.state.selectedKeys;return this._isSelectAll=e.every(i=>t.has(i)),this._isSelectAll}get firstSelectedKey(){let e=null;for(let i of this.state.selectedKeys){let l=this.collection.getItem(i);(!e||l&&Pe(this.collection,l,e)<0)&&(e=l)}var t;return(t=e?.key)!==null&&t!==void 0?t:null}get lastSelectedKey(){let e=null;for(let i of this.state.selectedKeys){let l=this.collection.getItem(i);(!e||l&&Pe(this.collection,l,e)>0)&&(e=l)}var t;return(t=e?.key)!==null&&t!==void 0?t:null}get disabledKeys(){return this.state.disabledKeys}get disabledBehavior(){return this.state.disabledBehavior}extendSelection(e){if(this.selectionMode==="none")return;if(this.selectionMode==="single"){this.replaceSelection(e);return}let t=this.getKey(e);if(t==null)return;let i;if(this.state.selectedKeys==="all")i=new Z([t],t,t);else{let s=this.state.selectedKeys;var l;let a=(l=s.anchorKey)!==null&&l!==void 0?l:t;i=new Z(s,a,t);var r;for(let c of this.getKeyRange(a,(r=s.currentKey)!==null&&r!==void 0?r:t))i.delete(c);for(let c of this.getKeyRange(t,a))this.canSelectItem(c)&&i.add(c)}this.state.setSelectedKeys(i)}getKeyRange(e,t){let i=this.collection.getItem(e),l=this.collection.getItem(t);return i&&l?Pe(this.collection,i,l)<=0?this.getKeyRangeInternal(e,t):this.getKeyRangeInternal(t,e):[]}getKeyRangeInternal(e,t){var i;if(!((i=this.layoutDelegate)===null||i===void 0)&&i.getKeyRange)return this.layoutDelegate.getKeyRange(e,t);let l=[],r=e;for(;r!=null;){let s=this.collection.getItem(r);if(s&&(s.type==="item"||s.type==="cell"&&this.allowsCellSelection)&&l.push(r),r===t)return l;r=this.collection.getKeyAfter(r)}return[]}getKey(e){let t=this.collection.getItem(e);if(!t||t.type==="cell"&&this.allowsCellSelection)return e;for(;t&&t.type!=="item"&&t.parentKey!=null;)t=this.collection.getItem(t.parentKey);return!t||t.type!=="item"?null:t.key}toggleSelection(e){if(this.selectionMode==="none")return;if(this.selectionMode==="single"&&!this.isSelected(e)){this.replaceSelection(e);return}let t=this.getKey(e);if(t==null)return;let i=new Z(this.state.selectedKeys==="all"?this.getSelectAllKeys():this.state.selectedKeys);i.has(t)?i.delete(t):this.canSelectItem(t)&&(i.add(t),i.anchorKey=t,i.currentKey=t),!(this.disallowEmptySelection&&i.size===0)&&this.state.setSelectedKeys(i)}replaceSelection(e){if(this.selectionMode==="none")return;let t=this.getKey(e);if(t==null)return;let i=this.canSelectItem(t)?new Z([t],t,t):new Z;this.state.setSelectedKeys(i)}setSelectedKeys(e){if(this.selectionMode==="none")return;let t=new Z;for(let i of e){let l=this.getKey(i);if(l!=null&&(t.add(l),this.selectionMode==="single"))break}this.state.setSelectedKeys(t)}getSelectAllKeys(){let e=[],t=i=>{for(;i!=null;){if(this.canSelectItem(i)){var l;let s=this.collection.getItem(i);s?.type==="item"&&e.push(i);var r;s?.hasChildNodes&&(this.allowsCellSelection||s.type!=="item")&&t((r=(l=Mn(Rn(s,this.collection)))===null||l===void 0?void 0:l.key)!==null&&r!==void 0?r:null)}i=this.collection.getKeyAfter(i)}};return t(this.collection.getFirstKey()),e}selectAll(){!this.isSelectAll&&this.selectionMode==="multiple"&&this.state.setSelectedKeys("all")}clearSelection(){!this.disallowEmptySelection&&(this.state.selectedKeys==="all"||this.state.selectedKeys.size>0)&&this.state.setSelectedKeys(new Z)}toggleSelectAll(){this.isSelectAll?this.clearSelection():this.selectAll()}select(e,t){this.selectionMode!=="none"&&(this.selectionMode==="single"?this.isSelected(e)&&!this.disallowEmptySelection?this.toggleSelection(e):this.replaceSelection(e):this.selectionBehavior==="toggle"||t&&(t.pointerType==="touch"||t.pointerType==="virtual")?this.toggleSelection(e):this.replaceSelection(e))}isSelectionEqual(e){if(e===this.state.selectedKeys)return!0;let t=this.selectedKeys;if(e.size!==t.size)return!1;for(let i of e)if(!t.has(i))return!1;for(let i of t)if(!e.has(i))return!1;return!0}canSelectItem(e){var t;if(this.state.selectionMode==="none"||this.state.disabledKeys.has(e))return!1;let i=this.collection.getItem(e);return!(!i||!(i==null||(t=i.props)===null||t===void 0)&&t.isDisabled||i.type==="cell"&&!this.allowsCellSelection)}isDisabled(e){var t,i;return this.state.disabledBehavior==="all"&&(this.state.disabledKeys.has(e)||!!(!((i=this.collection.getItem(e))===null||i===void 0||(t=i.props)===null||t===void 0)&&t.isDisabled))}isLink(e){var t,i;return!!(!((i=this.collection.getItem(e))===null||i===void 0||(t=i.props)===null||t===void 0)&&t.href)}getItemProps(e){var t;return(t=this.collection.getItem(e))===null||t===void 0?void 0:t.props}withCollection(e){return new Ft(e,this.state,{allowsCellSelection:this.allowsCellSelection,layoutDelegate:this.layoutDelegate||void 0})}constructor(e,t,i){this.collection=e,this.state=t;var l;this.allowsCellSelection=(l=i?.allowsCellSelection)!==null&&l!==void 0?l:!1,this._isSelectAll=null,this.layoutDelegate=i?.layoutDelegate||null}}const Dt=f.createContext(null);function gi(n){let e=f.useRef({});return E.createElement(Dt.Provider,{value:e},n.children)}const Qn=f.forwardRef(function(e,t){let{name:i,isVisible:l=!0,children:r,className:s,style:a,...c}=e,[u,p]=f.useState(l?"visible":"hidden"),h=f.useContext(Dt);if(!h)throw new Error("<SharedElement> must be rendered inside a <SharedElementTransition>");l&&u==="hidden"&&p("visible"),t=jt(t),z(()=>{let y=t.current,g=h.current,P=g[i],m=null;if(y&&l&&P){p("visible");let w=y.getAnimations(),K=P.style.map(([x,N])=>{let M=y.style[x];if(x==="translate"){let V=P.rect,R=y.getBoundingClientRect(),L=V.left-R?.left,q=V.top-R?.top;y.style.translate=`${L}px ${q}px`}else y.style[x]=N;return[x,M]});for(let x of y.getAnimations())w.includes(x)||x.cancel();m=requestAnimationFrame(()=>{m=null;for(let[x,N]of K)y.style[x]=N}),delete g[i]}else y&&l&&!P?(queueMicrotask(()=>ye.flushSync(()=>p("entering"))),m=requestAnimationFrame(()=>{m=null,p("visible")})):y&&!l&&queueMicrotask(()=>{g[i]?(delete g[i],ye.flushSync(()=>p("exiting")),Promise.all(y.getAnimations().map(w=>w.finished)).then(()=>p("hidden")).catch(()=>{})):p("hidden")});return()=>{if(m!=null&&cancelAnimationFrame(m),y&&y.isConnected&&!y.hasAttribute("data-exiting")){let w=window.getComputedStyle(y);if(w.transitionProperty!=="none"){let K=w.transitionProperty.split(/\s*,\s*/);g[i]={rect:y.getBoundingClientRect(),style:K.map(x=>[x,w[x]])}}}}},[t,h,i,l]);let v=Jt({children:r,className:s,style:a,values:{isEntering:u==="entering",isExiting:u==="exiting"}});return u==="hidden"?null:E.createElement("div",{...c,...v,ref:t,"data-entering":u==="entering"||void 0,"data-exiting":u==="exiting"||void 0})}),ei=f.createContext({isSelected:!1}),mi=f.forwardRef(function(e,t){[e,t]=Zt(e,t,ei);let{isSelected:i,...l}=e;return E.createElement(Qn,{...l,ref:t,className:e.className||"react-aria-SelectionIndicator",name:"SelectionIndicator",isVisible:i})});export{tn as $,vi as A,gi as B,bi as C,te as D,Jn as E,mi as F,ii as a,$t as b,yt as c,oi as d,si as e,ke as f,ai as g,Rn as h,$n as i,ui as j,$e as k,$i as l,ci as m,Ft as n,fi as o,Ln as p,we as q,ri as r,li as s,hi as t,yi as u,di as v,pi as w,On as x,ei as y,Un as z};
